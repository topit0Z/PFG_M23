#!/bin/bash
# DTE Admin
# Pedro Requena <pf.requena@alumnos.upm.es>
#


BIN_DIR=/usr/bin
LIB_DIR=/var/lib


#Cargamos las variables
source $LIB_DIR/globals

#Cargamos las funciones
source $BIN_DIR/functions


# Main #

# Check user
	usuario=$(whoami 2> /dev/null)
	if [ "$usuario" != "root" ]
	then
		_mensaje "¡Error! Debe tener privilegios de root para ejecutar el DTE Admin"
		exit 1
  	fi

while true
do
#
CHOICE=$(
	whiptail --title "$TITULO" --menu "Seleccione una opción" 20 75 8\
	"1)" "Instalar M23"   \
	"2)" "Configurar Red"  \
	"3)" "Escanear direcciones MAC"  \
	"4)" "Consultar nombrado de las interfaces de red" \
	"5)" "Cambiar nombrado de las interfaces de red" \
	"6)" "Salir" \
	3>&1 1<&2 2>&3) # Se intercambian stdout y stderr porque whiptail utiliza la primera para imprimir los diálogos y la segunda para los datos introducidos, así podemos recogerlos
	
	case $CHOICE in
		"1)")   
			instalar_m23
		;;
		"2)")   
			configura_red
		;;
		"3)")   
			escanear_MAC
		;;
		"4)")   
			get_nombrado_interfaces "show"
		;;
		"5)")   
			set_nombrado_interfaces
		;;
		"6)") 
			clear
			exit
		;;
	esac
done
clear
exit
